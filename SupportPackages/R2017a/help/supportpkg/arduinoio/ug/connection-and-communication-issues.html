<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" itemscope itemtype="http://www.mathworks.com/help/schema/MathWorksDocPage">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Lost Connection and Data Issues</title>
<link rel="stylesheet" href="docstyle.css" type="text/css"><link href="../includes/product/css/bootstrap.min.css" rel="stylesheet" type="text/css">


  <meta http-equiv="Content-Script-Type" content="text/javascript">
<meta name="toctype" itemprop="pagetype" content="ug">
<meta name="infotype" itemprop="infotype" content="trbl" />

<meta name="description" itemprop="description" content="If you are losing connection to your Arduino hardware and seeing improper data, try these tips." />
<script type="text/javascript" src="../includes/product/scripts/jquery/jquery-latest.js"></script>
<link href="../includes/product/css/site6.css?201706221413" rel="stylesheet" type="text/css">
<link href="../includes/product/css/site6_lg.css?201706221413" rel="stylesheet" media="screen and (min-width: 1200px)">
<link href="../includes/product/css/site6_md.css?201706221413" rel="stylesheet" media="screen and (min-width: 992px) and (max-width: 1199px)">
<link href="../includes/product/css/site6_sm+xs.css?201706221413" rel="stylesheet" media="screen and (max-width: 991px)">
<link href="../includes/product/css/site6_sm.css?201706221413" rel="stylesheet" media="screen and (min-width: 768px) and (max-width: 991px)">
<link href="../includes/product/css/site6_xs.css?201706221413" rel="stylesheet" media="screen and (max-width: 767px)">
<link href="../includes/product/css/site6_offcanvas.css?201706221413" rel="stylesheet" type="text/css">

<script src="../includes/shared/scripts/l10n.js"></script>
<script src="../includes/shared/scripts/docscripts.js"></script>
<script src="../includes/shared/scripts/f1help.js"></script>
<script src="../includes/product/scripts/docscripts.js"></script>
<script src="../includes/shared/scripts/mw.imageanimation.js"></script>
<script src="../includes/shared/scripts/jquery.highlight.js"></script>
<script src="../includes/product/scripts/underscore-min.js"></script>
<script src="../includes/product/scripts/examples.js"></script>
<script src="../includes/product/scripts/use_platform_screenshots.js"></script>
<script src="../includes/product/scripts/suggest.js"></script>
<script src="../includes/shared/scripts/overload.js"></script>





<script src="../includes/product/scripts/jquery/jquery.mobile.custom.min.js"></script>
<script src="../includes/product/scripts/bootstrap.min.js" type="text/javascript"></script>
<script src="../includes/product/scripts/global.js"></script>
<link href="../includes/product/css/doc_center.css" rel="stylesheet" type="text/css">
<link href="../includes/product/css/doc_center_installed.css" rel="stylesheet" type="text/css">
<link href="../includes/product/css/doc_center_print.css" rel="stylesheet" type="text/css" media="print">
<script type="text/javascript" src="../includes/shared/equationrenderer/release/MathRenderer.js"></script>
</head>
<body id="responsive_offcanvas">
<div id="doc_header_spacer" class="header"></div>
<div class="sticky_header_container includes_subnav">
<div class="section_header level_3">
<div class="container-fluid">
<div class="row" id="mobile_search_row">
<div class="col-xs-12 col-sm-6 col-sm-push-6 col-md-5 col-md-push-7" id="mobile_search">
<div class="search_nested_content_container">
<form id="docsearch_form" name="docsearch_form" method="get" data-release="R2017a" data-language="en" action="../../../templates/searchresults.html">
<div class="input-group tokenized_search_field">
<label class="sr-only">Search Help</label>
<input type="text" class="form-control conjoined_search" autocomplete="off" name="qdoc" placeholder="Search Help" id="docsearch">
<div class="input-group-btn">
<button type="submit" name="submitsearch" id="submitsearch" class="btn icon-search btn_search_adjacent btn_search icon_16" tabindex="-1"></button>
</div>
</div>
</form>
</div>
<button class="btn icon-remove btn_search pull-right icon_32 visible-xs" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button></div>
<div class="col-sm-6 col-sm-pull-6 col-md-7 col-md-pull-5" id="section_header_title">
<div class="section_header_content">
<div class="section_header_title">
<h1><a href="../../../documentation-center.html">Documentation</a></h1>
</div>
</div>
</div>
<div class="visible-xs" id="search_actuator">
<button class="btn icon-search btn_search pull-right icon_16" data-toggle="collapse" href="#mobile_search" aria-expanded="false" aria-controls="mobile_search"></button>
</div>
</div><!--END.CLASS row-->
</div><!--END.CLASS container-fluid-->
</div><!--END.CLASS section_header level_3-->
<div class="horizontal_nav">
<div class="horizontal_nav_container">
<div class="offcanvas_actuator" data-toggle="offcanvas" data-target="#sidebar" id="nav_toggle">
<button type="button" class="btn"><span class="sr-only">Toggle navigation</span><span class="icon-menu icon_24"></span></button>
<span class="offcanvas_actuator_label"></span><span class="offcanvas_actuator_close"></span>
</div>
<div class="offcanvas_horizontal_nav">
<div class="container-fluid">
<div class="row">
<div class="col-md-12 hidden-xs hidden-sm"></div>
</div>
</div>
</div>
</div>
</div>
</div><!--END.CLASS sticky_header_container-->
<div class="row-offcanvas row-offcanvas-left">
<div class="sidebar-offcanvas" id="sidebar" role="navigation">
<nav class="offcanvas_nav" role="navigation">
<ul xmlns:atict="http://www.arbortext.com/namespace/atict" class="nav_breadcrumb">
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../../../documentation-center.html" itemprop="url"><span itemprop="title">Documentation Home</span></a></li>
</ul>

<ul xmlns:atict="http://www.arbortext.com/namespace/atict" class="nav_disambiguation">
<li class="product"><a href="../index.html">MATLAB Support Package for Arduino Hardware</a>
<div class="dropdown">
<span class="icon-arrow-down icon_16" id="dropdownMenu1" data-toggle="dropdown"></span>
<ul class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="dropdownMenu1">
<li role="presentation"><a role="menuitem" tabindex="-1" href="../examples.html?s_cid=doc_flyout">Examples</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="../troubleshooting-in-matlab-support-package-for-arduino-hardware.html?s_cid=doc_flyout">Troubleshooting</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="../functionlist.html?s_cid=doc_flyout">Functions and Other Reference</a></li>
<li role="presentation"><a role="menuitem" tabindex="-1" href="../release-notes.html?s_cid=doc_flyout">Release Notes</a></li>
</ul>
</div>
</li>
<li itemscope="" itemtype="http://www.data-vocabulary.org/Breadcrumb" itemprop="breadcrumb"><a href="../troubleshooting-in-matlab-support-package-for-arduino-hardware.html" itemprop="url"><span itemprop="title">Troubleshooting in MATLAB Support Package for Arduino Hardware</span></a></li>
</ul>
<ul xmlns:atict="http://www.arbortext.com/namespace/atict" class="nav_scrollspy nav">
<li class="nav_scrollspy_function"><a href="#responsive_offcanvas">Lost Connection and Data Issues</a></li>
<li class="nav_scrollspy_title">On this page</li>

<li><a href="#bvdmnge" class="intrnllnk">Lost Connection with Arduino Hardware</a>
<ul>
<li><a href="#bvdmnhf" class="intrnllnk">Unplugged Hardware</a></li>
<li><a href="#bvdmnh9" class="intrnllnk">Board with Low Data Memory</a></li>
<li><a href="#bvdmnit" class="intrnllnk">Too Many Device Objects</a></li>
<li><a href="#bvejtev" class="intrnllnk">Communication Loss When Writing to I2C Device</a></li>
<li><a href="#bvejtff" class="intrnllnk">Connection Lost When Using Timer</a></li>
<li><a href="#bvlv3vx-1" class="intrnllnk">Connection Lost when Using Encoders</a></li>
</ul>
</li>
<li><a href="#bvdmn6a" class="intrnllnk">Data Issues</a>
<ul>
<li><a href="#bvdmn7d" class="intrnllnk">Pin Not Receiving Data</a></li>
<li><a href="#bvd9_st" class="intrnllnk">Pin Not Receiving Proper Signal</a></li>
<li><a href="#bvdmn8f" class="intrnllnk">Strange Data</a></li>
<li><a href="#bvd9_ux" class="intrnllnk">Incorrect Input or Output</a></ul>
</nav>
<script src="../includes/product/scripts/offcanvas.js"></script></div><!--END.CLASS sidebar-offcanvas-->
<div class="content_container" id="content_container">
<div class="container-fluid">
<div class="row">
<div class="col-xs-12">

<section id="doc_center_content" lang="en"><div id="pgtype-topic">
<span id="bvdmkfr" class="anchor_target"></span><h2 class="title r2017a" itemprop="title content" id="bvdmkfr">Lost Connection and Data Issues</h2><div class="clearfix"></div><div itemprop="content"><span id="bvdmnge" class="anchor_target"></span><h3 class="title" id="bvdmnge">Lost Connection with Arduino Hardware</h3><span id="bvdmnhf" class="anchor_target"></span><h4 class="title" id="bvdmnhf">Unplugged Hardware</h4><p>The most common cause of a lost connection is an unplugged cable.
Check the cable and make sure that it is firmly plugged in.</p><span id="bvdmnh9" class="anchor_target"></span><h4 class="title" id="bvdmnh9">Board with Low Data Memory</h4><p>If your Arduino<sup>&#x00AE;</sup> board has low data memory, you may lose
connection while working with large data sets. If this occurs, remove
all libraries that you are not using from the board to free up some
space. For example, create an <code>arduino</code> object with
no libraries.<div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>a = arduino(<span style="color:#A020F0">'COM3'</span>,<span style="color:#A020F0">'Uno'</span>,<span style="color:#A020F0">'Libraries'</span>,<span style="color:#A020F0">''</span>);</pre></div></div></div></p><span id="bvdmnit" class="anchor_target"></span><h4 class="title" id="bvdmnit">Too Many Device Objects</h4><p>If you have created too many add-on objects for your Arduino hardware,
those objects may use up memory on the board and cause a lost connection.
Clear all objects and reconnect. Make sure that you use fewer peripheral
devices.</p><span id="bvejtev" class="anchor_target"></span><h4 class="title" id="bvejtev">Communication Loss When Writing to I2C Device</h4><p>Make sure that the power line is always connected. With I2C
devices, the server code can stop working if the power line is disconnected.</p><span id="bvejtff" class="anchor_target"></span><h4 class="title" id="bvejtff">Connection Lost When Using Timer</h4><span id="reentrancy_exception" class="anchor_target"></span><p>You can lose connection to your Arduino board when you
use it with a timer. The callback timer on your system runs between
lines of MATLAB<sup>&#x00AE;</sup> code. This can cause the timer to issue a call
to the device at the same time you issue a read, write, or configuration
change on the Arduino board, or click a button in the interface. The
operation throws an error with a re-entrancy exception. For example,
consider a timer function that polls Arduino pins.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>t = timer(<span style="color:#A020F0">'Name'</span>,<span style="color:#A020F0">'PinSniffer'</span>,<span style="color:#A020F0">'BusyMode'</span>,<span style="color:#A020F0">'Drop'</span>,<span style="color:#A020F0">'ExecutionMode'</span>,<span style="color:#A020F0">'fixedSpacing'</span>,<span style="color:#A020F0">'Period'</span>,1,<span style="color:#A020F0">'TimerFcn'</span>,{@pollArduinoPins,a}); 
<span style="color:#0000FF">function</span> tester(src,event,a) 
<span style="color:#0000FF">try</span> 
    value = 1:10; 
    <span style="color:#0000FF">for</span> iloop = 2:13 
        <span style="color:#0000FF">if</span> strcmpi(configurePin(a,iloop),<span style="color:#A020F0">'D3'</span>) 
            value(iloop-1) = readDigitalPin(a,iloop); 
        <span style="color:#0000FF">end</span> 
    <span style="color:#0000FF">end</span> 
<span style="color:#0000FF">catch</span> e 
    stop(src); 
    rethrow(e); 
<span style="color:#0000FF">end</span> 
</pre></div></div></div><p>In this situation, you issue a command to configure pins on
your Arduino board and read the value.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>configurePin(a,&#8216;A0',&#8216;DigitalOuput'); 
value = readDigitalPin(a,<span style="color:#A020F0">'A0'</span>); 
</pre></div></div></div><p>If your read command and the poll run simultaneously, the timer
can interrupt your calls before it has completed. This results in
a re-entrancy exception.</p><p>To work around this situation, stop the timer before you manually
issue a command.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>stop(t);
configurePin(a,&#8216;A0',&#8216;DigitalOuput'); 
value = readDigitalPin(a,<span style="color:#A020F0">'A0'</span>); 
start(t);
</pre></div></div></div><span id="bvlv3vx-1" class="anchor_target"></span><h4 class="title" id="bvlv3vx-1">Connection Lost when Using Encoders</h4><p>You can lose connection between the Arduino board and MATLAB,
when the encoder shaft is rotating fast or the A/B signal rate of
the encoder crosses the threshold of 17&#8211;18 kHz. When one of
these situations happens, the interrupts used by A/B channels completely
block the serial communication on the Arduino board which also
relies on interrupts. Therefore, it can stop the Arduino board
from sending a response back to MATLAB, and you see the following
error message:</p><div class="code_responsive"><div class="programlisting"><div class="codeoutput"><pre>Host and client connection is lost. Make sure the board is plugged in, and recreate arduino and related objects.</pre></div></div></div><p>However, once the shaft stops rotating or rotates slower, the
serial communication works as usual.</p></div><div class="clearfix"></div><div itemprop="content"><span id="bvdmn6a" class="anchor_target"></span><h3 class="title" id="bvdmn6a">Data Issues</h3><span id="bvdmn7d" class="anchor_target"></span><h4 class="title" id="bvdmn7d">Pin Not Receiving Data</h4><p>Make sure devices that have floating or high impedance pins
have proper pull-up or pull-down resistors. Use <code>configurePin</code> to
set the mode to pull-up internally.</p><span id="bvd9_st" class="anchor_target"></span><h4 class="title" id="bvd9_st">Pin Not Receiving Proper Signal</h4><p>Make sure that your pins are properly configured. For example,
a pull-up or a pull-down resistor is being used for reading data.
Use <code>configurePin</code> to set the mode to pull-up internally.</p><span id="bvdmn8f" class="anchor_target"></span><h4 class="title" id="bvdmn8f">Strange Data</h4><p>If your Arduino hardware has low data memory, you may see
strange data. If this occurs, delete all libraries that you are not
using from the board to free some space. To delete libraries, create
an <code>arduino</code> object with no libraries.</p><div class="code_responsive"><div class="programlisting"><div class="codeinput"><pre>a = arduino(<span style="color:#A020F0">'COM3'</span>,<span style="color:#A020F0">'Uno'</span>,<span style="color:#A020F0">'Libraries'</span>,<span style="color:#A020F0">''</span>);</pre></div></div></div><span id="bvd9_ux" class="anchor_target"></span><h4 class="title" id="bvd9_ux">Incorrect Input or Output</h4><p>You can get incorrect readings if you are using the wrong pin.
For example, if you are writing to a pin configured as input or reading
from a pin configured as a pull-up.</p></div>
</div></section>

<div class="clearfix"></div>
<div class="feedbackblock">Was this topic helpful?
<input type="button" value="Yes" onClick="openFeedbackWindow('http://www.mathworks.com/programs/bounce_hub_help.html?s_cid=Help_Topic_Survey&amp;surveyParams='+document.location.href+'-YES-R2017a');">
<input type="button" value="No" onClick="openFeedbackWindow('http://www.mathworks.com/programs/bounce_hub_help.html?s_cid=Help_Topic_Survey&amp;surveyParams='+document.location.href+'-NO-R2017a');">
</div>
<!--Last updated: Thu Jun 22 14:13:07 EDT 2017-->
</div>
</div>
</div><!--close_0960-->
</div><!--close_0970-->
<div class="body_trail_container">
<div class="container-fluid">
<div class="row">
<div class="col-xs-12">
<div class="row"><div class="col-xs-12 col-sm-3"><h5><a href="../index.html?s_cid=doc_ftr">MATLAB Support Package for Arduino Hardware Documentation</a></h5>
<ul class="list-unstyled hidden-xs"><li><a href="../examples.html?s_cid=doc_ftr">Examples</a></li>
<li><a href="../troubleshooting-in-matlab-support-package-for-arduino-hardware.html?s_cid=doc_ftr">Troubleshooting</a></li>
<li><a href="../functionlist.html?s_cid=doc_ftr">Functions and Other Reference</a></li>
<li><a href="../release-notes.html?s_cid=doc_ftr">Release Notes</a></li>
</ul>
</div>
<div class="col-xs-12 col-sm-3"><h5><a href="../../../documentation-center.html?s_cid=doc_ftr">Other Documentation</a></h5>
<ul class="list-unstyled hidden-xs"><li><a href="../../../matlab/index.html?s_cid=doc_ftr">MATLAB</a></li><li><a href="../../../supportpkg/arduino/index.html?s_cid=doc_ftr">Simulink Support Package for Arduino Hardware</a></li><li><a href="../../../supportpkg/raspberrypiio/index.html?s_cid=doc_ftr">MATLAB Support Package for Raspberry Pi Hardware</a></li><li><a href="../../../supportpkg/legomindstormsev3io/index.html?s_cid=doc_ftr">MATLAB Support Package for LEGO MINDSTORMS EV3 Hardware</a></li><li><a href="../../../documentation-center.html?s_cid=doc_ftr">Documentation Home</a></li></ul>
</div>
<div class="col-xs-12 col-sm-3"><h5><a href="http://www.mathworks.com/support/?s_cid=doc_ftr">Support</a></h5>
<ul class="list-unstyled hidden-xs"><li><a href="http://www.mathworks.com/matlabcentral/answers/index?s_cid=doc_ftr">MATLAB Answers</a></li><li><a href="http://www.mathworks.com/support/install-matlab.html?s_cid=doc_ftr">Installation Help</a></li><li><a href="http://www.mathworks.com/support/bugreports/?s_cid=doc_ftr">Bug Reports</a></li><li><a href="http://www.mathworks.com/products/availability/?s_cid=doc_ftr">Product Requirements</a></li><li><a href="http://www.mathworks.com/downloads/?s_cid=doc_ftr">Software Downloads</a></li></ul>
</div>
</div>
</div>
</div>
</div><!--END.CLASS container-fluid-->
</div><!--END.CLASS body_trail_container-->
<footer id="footer" class="bs-footer">
<div class="container-fluid">
<div class="footer">
<div class="row">
<div class="col-xs-12">
<p class="copyright">&copy; 1994-2017 The MathWorks, Inc.</p>
<ul class="footernav"><li class="footernav_help"><a href="MATLAB:web(matlab.internal.licenseAgreement)">Terms of Use</a></li><li class="footernav_patents"><a href="MATLAB:web([matlabroot '/patents.txt'])">Patents</a></li><li class="footernav_trademarks"><a href="MATLAB:web([matlabroot '/trademarks.txt'])">Trademarks</a></li><li class="footernav_piracy"><a href="MATLAB:web([docroot '/acknowledgments.html'])">Acknowledgments</a></li></ul></div>
</div>
</div>
</div>
</footer>
</div><!--close row-offcanvas-->
</body>
</html>
